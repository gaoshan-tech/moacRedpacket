{"version":3,"sources":["webpack:///./src/view/test/index.vue?5dc2","webpack:///./src/utils/loadPic.js","webpack:///src/view/test/index.vue","webpack:///./src/view/test/index.vue?5b18","webpack:///./src/view/test/index.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticStyle","_l","item","attrs","getBase64Img","url","staticRenderFns","getBase64Str","callback","base64","image","Image","setAttribute","src","onload","w","width","h","height","scale","quality","canvas","document","createElement","ctx","getContext","anw","createAttribute","nodeValue","anh","setAttributeNode","drawImage","ext","substring","lastIndexOf","toLowerCase","toDataURL","component"],"mappings":"uHAAA,IAAIA,EAAS,WAAa,IAAIC,EAAIC,KAASC,EAAGF,EAAIG,eAAmBC,EAAGJ,EAAIK,MAAMD,IAAIF,EAAG,OAAOE,EAAG,MAAM,CAACE,YAAY,CAAC,WAAa,YAAYN,EAAIO,GAAIP,EAAW,SAAE,SAASQ,GAAM,OAAOJ,EAAG,MAAM,CAACE,YAAY,CAAC,MAAQ,OAAO,OAAS,QAAQ,gBAAgB,SAAS,CAACF,EAAG,MAAM,CAACE,YAAY,CAAC,MAAQ,OAAO,OAAS,QAAQG,MAAM,CAAC,IAAMT,EAAIU,aAAaF,EAAKG,MAAQH,EAAKG,IAAI,IAAM,WAAU,IACnYC,EAAkB,GCDf,SAASC,EAAaF,EAAKG,GAC9B,IACIC,EADAC,EAAQ,IAAIC,MAEhBD,EAAME,aAAa,cAAe,aAClCF,EAAMG,IAAMR,EACZK,EAAMI,OAAS,WAEX,IAAIC,EAAIL,EAAMM,MACVC,EAAIP,EAAMQ,OACVC,EAAQJ,EAAIE,EAChBF,EAAI,IACJE,EAAIF,EAAII,EAER,IAAIC,EAAU,GAEVC,EAASC,SAASC,cAAc,UAChCC,EAAMH,EAAOI,WAAW,MAExBC,EAAMJ,SAASK,gBAAgB,SACnCD,EAAIE,UAAYb,EAChB,IAAIc,EAAMP,SAASK,gBAAgB,UACnCE,EAAID,UAAYX,EAChBI,EAAOS,iBAAiBJ,GACxBL,EAAOS,iBAAiBD,GACxBL,EAAIO,UAAUrB,EAAO,EAAG,EAAGK,EAAGE,GAC9B,IAAIe,EAAMtB,EAAMG,IAAIoB,UAAUvB,EAAMG,IAAIqB,YAAY,KAAO,GAAGC,cAC9D1B,EAASY,EAAOe,UAAU,SAAWJ,EAAKZ,GAC1CZ,EAASC,ICjBjB,OACE,KAAF,QACE,KAFF,WAGI,MAAJ,CACM,QAAN,KAGE,QAPF,WAQI,KAAJ,SACA,CACM,IAAN,gEAEA,CACM,IAAN,gEAEA,CACM,IAAN,gEAEA,CACM,IAAN,gEAEA,CACM,IAAN,gEAEA,CACM,IAAN,gEAEA,CACM,IAAN,gEACA,CACM,IAAN,gEAEA,CACM,IAAN,gEAEA,CACM,IAAN,iEAGI,IAAJ,OACI,KAAJ,yBACM,EAAN,mBACQ,eAAR,iBAEQ,EAAR,cAAU,KAAV,MAAU,IAAV,WAKE,QAAF,CACI,aADJ,SACA,GACM,OAAN,6BC7D8V,I,YCO1V4B,EAAY,eACd,EACA5C,EACAa,GACA,EACA,KACA,WACA,MAIa,aAAA+B,E","file":"js/chunk-2d0ddf1a.8ccb8ecb.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticStyle:{\"background\":\"#cccccc\"}},_vm._l((_vm.imgData),function(item){return _c('div',{staticStyle:{\"width\":\"100%\",\"height\":\"200px\",\"margin-bottom\":\"20px\"}},[_c('img',{staticStyle:{\"width\":\"100%\",\"height\":\"100%\"},attrs:{\"src\":_vm.getBase64Img(item.url) || item.url,\"alt\":\"\"}})])}),0)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export function getBase64Str(url, callback) {\n    var image = new Image();\n    var base64;\n    image.setAttribute(\"crossOrigin\", 'Anonymous')\n    image.src = url;\n    image.onload = function () {\n        // 默认按比例压缩\n        var w = image.width,\n            h = image.height,\n            scale = w / h;\n        w = 200;\n        h = w / scale;\n        // 默认图片质量为0.7，quality值越小，所绘制出的图像越模糊\n        var quality = 0.7;\n        //生成canvas\n        var canvas = document.createElement('canvas');\n        var ctx = canvas.getContext('2d');\n        // 创建属性节点\n        var anw = document.createAttribute(\"width\");\n        anw.nodeValue = w;\n        var anh = document.createAttribute(\"height\");\n        anh.nodeValue = h;\n        canvas.setAttributeNode(anw);\n        canvas.setAttributeNode(anh);\n        ctx.drawImage(image, 0, 0, w, h);\n        var ext = image.src.substring(image.src.lastIndexOf(\".\") + 1).toLowerCase();//图片格式\n        base64 = canvas.toDataURL(\"image/\" + ext, quality);\n        callback(base64);\n    };\n}","<template>\n    <div style=\"background: #cccccc\">\n        <div style=\"width: 100%; height: 200px; margin-bottom: 20px\" v-for=\"item in imgData\">\n            <img :src=\"getBase64Img(item.url) || item.url\" alt=\"\" style=\"width: 100%; height: 100%;\">\n        </div>\n    </div>\n</template>\n\n<script>\n    import { getBase64Str } from '@/utils/loadPic'\n    export default {\n        name: \"index\",\n        data() {\n            return {\n                imgData: []\n            }\n        },\n        mounted() {\n            this.imgData = [\n                {\n                    url: 'http://47.92.110.121:18080/moac-vote/vote/showPic?fileId=169'\n                },\n                {\n                    url: 'http://47.92.110.121:18080/moac-vote/vote/showPic?fileId=168'\n                },\n                {\n                    url: 'http://47.92.110.121:18080/moac-vote/vote/showPic?fileId=167'\n                },\n                {\n                    url: 'http://47.92.110.121:18080/moac-vote/vote/showPic?fileId=166'\n                },\n                {\n                    url: 'http://47.92.110.121:18080/moac-vote/vote/showPic?fileId=165'\n                },\n                {\n                    url: 'http://47.92.110.121:18080/moac-vote/vote/showPic?fileId=164'\n                },\n                {\n                    url: 'http://47.92.110.121:18080/moac-vote/vote/showPic?fileId=163'\n                },  {\n                    url: 'http://47.92.110.121:18080/moac-vote/vote/showPic?fileId=165'\n                },\n                {\n                    url: 'http://47.92.110.121:18080/moac-vote/vote/showPic?fileId=164'\n                },\n                {\n                    url: 'http://47.92.110.121:18080/moac-vote/vote/showPic?fileId=163'\n                }\n            ];\n            const that = this;\n            this.imgData.map(d => {\n                getBase64Str(d.url, function(res) {\n                    sessionStorage.setItem(d.url, res);\n                    // that.$db.add('imgUrl', {name: d.url, key: res});\n                    that.$db.add('t1', {name: d.url, key: res});\n                })\n            })\n            // this.$db.add('t1', {name: '张三', key: 18});\n        },\n        methods: {\n            getBase64Img(imgUrl) {\n                return sessionStorage.getItem(imgUrl);\n            },\n        }\n    }\n</script>\n\n<style scoped>\n\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=527093fa&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"527093fa\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}