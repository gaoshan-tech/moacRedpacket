(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ce0f5d30"],{"02f4":function(t,e,n){var r=n("4588"),i=n("be13");t.exports=function(t){return function(e,n){var c,a,o=String(i(e)),s=r(n),u=o.length;return s<0||s>=u?t?"":void 0:(c=o.charCodeAt(s),c<55296||c>56319||s+1===u||(a=o.charCodeAt(s+1))<56320||a>57343?t?o.charAt(s):c:t?o.slice(s,s+2):a-56320+(c-55296<<10)+65536)}}},"0390":function(t,e,n){"use strict";var r=n("02f4")(!0);t.exports=function(t,e,n){return e+(n?r(t,e).length:1)}},"11e9":function(t,e,n){var r=n("52a7"),i=n("4630"),c=n("6821"),a=n("6a99"),o=n("69a8"),s=n("c69a"),u=Object.getOwnPropertyDescriptor;e.f=n("9e1e")?u:function(t,e){if(t=c(t),e=a(e,!0),s)try{return u(t,e)}catch(n){}if(o(t,e))return i(!r.f.call(t,e),t[e])}},"214f":function(t,e,n){"use strict";n("b0c5");var r=n("2aba"),i=n("32e9"),c=n("79e5"),a=n("be13"),o=n("2b4c"),s=n("520a"),u=o("species"),l=!c((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),f=function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2===n.length&&"a"===n[0]&&"b"===n[1]}();t.exports=function(t,e,n){var p=o(t),d=!c((function(){var e={};return e[p]=function(){return 7},7!=""[t](e)})),h=d?!c((function(){var e=!1,n=/a/;return n.exec=function(){return e=!0,null},"split"===t&&(n.constructor={},n.constructor[u]=function(){return n}),n[p](""),!e})):void 0;if(!d||!h||"replace"===t&&!l||"split"===t&&!f){var v=/./[p],g=n(a,p,""[t],(function(t,e,n,r,i){return e.exec===s?d&&!i?{done:!0,value:v.call(e,n,r)}:{done:!0,value:t.call(n,e,r)}:{done:!1}})),b=g[0],m=g[1];r(String.prototype,t,b),i(RegExp.prototype,p,2==e?function(t,e){return m.call(t,this,e)}:function(t){return m.call(t,this)})}}},"28a5":function(t,e,n){"use strict";var r=n("aae3"),i=n("cb7c"),c=n("ebd6"),a=n("0390"),o=n("9def"),s=n("5f1b"),u=n("520a"),l=n("79e5"),f=Math.min,p=[].push,d="split",h="length",v="lastIndex",g=4294967295,b=!l((function(){RegExp(g,"y")}));n("214f")("split",2,(function(t,e,n,l){var m;return m="c"=="abbc"[d](/(b)*/)[1]||4!="test"[d](/(?:)/,-1)[h]||2!="ab"[d](/(?:ab)*/)[h]||4!="."[d](/(.?)(.?)/)[h]||"."[d](/()()/)[h]>1||""[d](/.?/)[h]?function(t,e){var i=String(this);if(void 0===t&&0===e)return[];if(!r(t))return n.call(i,t,e);var c,a,o,s=[],l=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),f=0,d=void 0===e?g:e>>>0,b=new RegExp(t.source,l+"g");while(c=u.call(b,i)){if(a=b[v],a>f&&(s.push(i.slice(f,c.index)),c[h]>1&&c.index<i[h]&&p.apply(s,c.slice(1)),o=c[0][h],f=a,s[h]>=d))break;b[v]===c.index&&b[v]++}return f===i[h]?!o&&b.test("")||s.push(""):s.push(i.slice(f)),s[h]>d?s.slice(0,d):s}:"0"[d](void 0,0)[h]?function(t,e){return void 0===t&&0===e?[]:n.call(this,t,e)}:n,[function(n,r){var i=t(this),c=void 0==n?void 0:n[e];return void 0!==c?c.call(n,i,r):m.call(String(i),n,r)},function(t,e){var r=l(m,t,this,e,m!==n);if(r.done)return r.value;var u=i(t),p=String(this),d=c(u,RegExp),h=u.unicode,v=(u.ignoreCase?"i":"")+(u.multiline?"m":"")+(u.unicode?"u":"")+(b?"y":"g"),x=new d(b?u:"^(?:"+u.source+")",v),y=void 0===e?g:e>>>0;if(0===y)return[];if(0===p.length)return null===s(x,p)?[p]:[];var w=0,N=0,R=[];while(N<p.length){x.lastIndex=b?N:0;var _,E=s(x,b?p:p.slice(N));if(null===E||(_=f(o(x.lastIndex+(b?0:N)),p.length))===w)N=a(p,N,h);else{if(R.push(p.slice(w,N)),R.length===y)return R;for(var k=1;k<=E.length-1;k++)if(R.push(E[k]),R.length===y)return R;N=w=_}}return R.push(p.slice(w)),R}]}))},"2f21":function(t,e,n){"use strict";var r=n("79e5");t.exports=function(t,e){return!!t&&r((function(){e?t.call(null,(function(){}),1):t.call(null)}))}},4319:function(t,e,n){},"49ef":function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("van-row",{attrs:{type:"flex",justify:"center"}},[n("van-col",{attrs:{span:"24"}},[n("van-nav-bar",{attrs:{title:"领取记录"}})],1)],1),n("van-row",{staticClass:"count-wrap",attrs:{type:"flex"}},[n("van-list",{staticClass:"van-list-container",attrs:{finished:t.finished,"finished-text":"没有更多了",span:24},on:{load:function(e){return t.queryReceiveRecord(t.currentNum-1)}},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},[n("van-cell",[n("span",{staticClass:"fl",staticStyle:{width:"35%"}},[t._v("领取时间")]),n("span",{staticClass:"fl",staticStyle:{width:"20%"}},[t._v("金额")]),n("span",{staticClass:"fr",staticStyle:{width:"45%","text-align":"right"}},[t._v("红包备注")])]),t._l(t.packetList,(function(e){return n("van-cell",{key:e.index},[n("span",{staticClass:"fl vote-time-wrap font_14",staticStyle:{width:"35%"}},[t._v(t._s(e.timeStr))]),n("span",{staticClass:"fl vote-time-wrap font_14",staticStyle:{width:"20%"}},[t._v(t._s(t._f("handleAmount")(e.amount)))]),n("span",{staticClass:"fl vote-time-wrap font_14",staticStyle:{width:"45%","text-align":"right"}},[t._v(t._s(e.description))])])}))],2)],1)],1)},i=[],c=(n("c5f6"),n("55dd"),n("28a5"),n("6b54"),n("e17f"),n("2241")),a=(n("96cf"),n("3b8d")),o={name:"index",data:function(){return{loading:!1,finished:!1,account:"0x0",packetList:[],receiveTotalNumber:0,currentNum:0,contract:{address:this.$contract_address,instance:null}}},created:function(){this.initInstance(),this.getUrlQuery()},mounted:function(){this.perQueryReceiveRecord()},methods:{initInstance:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.contract.instance=this.$chain3.mc.contract(this.$RedPacketArtifact.abi).at(this.contract.address),window.instance=this.contract.instance;case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),getUrlQuery:function(){var t=this;this.account=this.$route.query.account,this.account.indexOf("0x")<0&&(console.log(this.account.indexOf("0x")),c["a"].alert({message:"请选择钱包地址"}).then((function(){t.goBack()})))},perQueryReceiveRecord:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e=this,this.contract.instance.queryReceiveRecord.call(this.account,0,(function(t,n){if(t)console.log(t);else{var r=n.toString(),i="0x"+r.slice(10);if(0!=r.indexOf("0x08c379a0")){var c=e.$Web3.eth.abi.decodeParameters(e.contract.instance.abi[12].outputs,n);return e.createTotalNumber=c.totalNum,e.currentNum=c.totalNum,console.log("that.createTotalNumber = "+e.createTotalNumber),console.log("that.currentNum = "+e.currentNum),void e.queryReceiveRecord(e.currentNum-1)}var a=e.$Web3.eth.abi.decodeParameter("string",i);console.log(a)}console.log("that.createTotalNumber = 0;"),e.createTotalNumber=0,e.finished=!0}));case 2:case"end":return t.stop()}}),t,this)})));function e(){return t.apply(this,arguments)}return e}(),queryReceiveRecord:function(){var t=Object(a["a"])(regeneratorRuntime.mark((function t(e){var n,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:for(n=this,console.log("queryReceiveRecord-----------"),r=e;r>=(e-10>0?e-10:0);r--)console.log("queryCreatedRecord  "+r),n.contract.instance.queryReceiveRecord.call(n.account,r,(function(t,e){if(t)console.log("err"),console.log(t);else{var r=e.toString(),i="0x"+r.slice(10);if(0==r.indexOf("0x08c379a0")){var c=n.$Web3.eth.abi.decodeParameter("string",i);console.log(c)}else{var a=e.toString(),o="0x"+a.slice(10);if(0==a.indexOf("0x08c379a0")){var s=n.$Web3.eth.abi.decodeParameter("string",o);console.log(s)}else{var u=n.$Web3.eth.abi.decodeParameters(n.contract.instance.abi[12].outputs,e);console.log(u);var l={};l.packetAddr=u.packetAddr,l.account=u.account,l.description=u.description,l.amount=n.$Web3.utils.fromWei(u.amount),l.time=new Date(1e3*u.time),l.timeStr=l.time.toLocaleDateString()+" "+l.time.toTimeString().split(" ")[0].slice(0,5),n.receiveTotalNumber=u.totalNum,n.pushList(l)}}}}));this.loading=!1;case 4:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}(),goBack:function(){history.go(-1)},pushList:function(t){this.packetList.push(t);var e={};this.packetList=this.packetList.reduce((function(t,n){return!e[n.packetAddr]&&(e[n.packetAddr]=t.push(n)),t}),[]),this.packetList.sort((function(t,e){return e.time-t.time})),this.currentNum=this.receiveTotalNumber-this.packetList.length+1,console.log(this.currentNum+"------------"),this.packetList.length>=this.receiveTotalNumber&&(this.finished=!0,console.log("finished"))}},filters:{handleStr:function(t){if(t.length>12){var e=t.substring(0,8),n=t.substr(t.length-4,4),r=e+"..."+n;return r.toLowerCase()}return t},handleAmount:function(t){return Number(t).toFixed(6)},parseNum:function(t){return parseFloat(t)}}},s=o,u=(n("4bcd"),n("2877")),l=Object(u["a"])(s,r,i,!1,null,"e4ef9512",null);e["default"]=l.exports},"4bcd":function(t,e,n){"use strict";var r=n("4319"),i=n.n(r);i.a},"520a":function(t,e,n){"use strict";var r=n("0bfb"),i=RegExp.prototype.exec,c=String.prototype.replace,a=i,o="lastIndex",s=function(){var t=/a/,e=/b*/g;return i.call(t,"a"),i.call(e,"a"),0!==t[o]||0!==e[o]}(),u=void 0!==/()??/.exec("")[1],l=s||u;l&&(a=function(t){var e,n,a,l,f=this;return u&&(n=new RegExp("^"+f.source+"$(?!\\s)",r.call(f))),s&&(e=f[o]),a=i.call(f,t),s&&a&&(f[o]=f.global?a.index+a[0].length:e),u&&a&&a.length>1&&c.call(a[0],n,(function(){for(l=1;l<arguments.length-2;l++)void 0===arguments[l]&&(a[l]=void 0)})),a}),t.exports=a},"55dd":function(t,e,n){"use strict";var r=n("5ca1"),i=n("d8e8"),c=n("4bf8"),a=n("79e5"),o=[].sort,s=[1,2,3];r(r.P+r.F*(a((function(){s.sort(void 0)}))||!a((function(){s.sort(null)}))||!n("2f21")(o)),"Array",{sort:function(t){return void 0===t?o.call(c(this)):o.call(c(this),i(t))}})},"5dbc":function(t,e,n){var r=n("d3f4"),i=n("8b97").set;t.exports=function(t,e,n){var c,a=e.constructor;return a!==n&&"function"==typeof a&&(c=a.prototype)!==n.prototype&&r(c)&&i&&i(t,c),t}},"5f1b":function(t,e,n){"use strict";var r=n("23c6"),i=RegExp.prototype.exec;t.exports=function(t,e){var n=t.exec;if("function"===typeof n){var c=n.call(t,e);if("object"!==typeof c)throw new TypeError("RegExp exec method returned something other than an Object or null");return c}if("RegExp"!==r(t))throw new TypeError("RegExp#exec called on incompatible receiver");return i.call(t,e)}},"8b97":function(t,e,n){var r=n("d3f4"),i=n("cb7c"),c=function(t,e){if(i(t),!r(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,e,r){try{r=n("9b43")(Function.call,n("11e9").f(Object.prototype,"__proto__").set,2),r(t,[]),e=!(t instanceof Array)}catch(i){e=!0}return function(t,n){return c(t,n),e?t.__proto__=n:r(t,n),t}}({},!1):void 0),check:c}},9093:function(t,e,n){var r=n("ce10"),i=n("e11e").concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return r(t,i)}},aa77:function(t,e,n){var r=n("5ca1"),i=n("be13"),c=n("79e5"),a=n("fdef"),o="["+a+"]",s="​",u=RegExp("^"+o+o+"*"),l=RegExp(o+o+"*$"),f=function(t,e,n){var i={},o=c((function(){return!!a[t]()||s[t]()!=s})),u=i[t]=o?e(p):a[t];n&&(i[n]=u),r(r.P+r.F*o,"String",i)},p=f.trim=function(t,e){return t=String(i(t)),1&e&&(t=t.replace(u,"")),2&e&&(t=t.replace(l,"")),t};t.exports=f},aae3:function(t,e,n){var r=n("d3f4"),i=n("2d95"),c=n("2b4c")("match");t.exports=function(t){var e;return r(t)&&(void 0!==(e=t[c])?!!e:"RegExp"==i(t))}},b0c5:function(t,e,n){"use strict";var r=n("520a");n("5ca1")({target:"RegExp",proto:!0,forced:r!==/./.exec},{exec:r})},c5f6:function(t,e,n){"use strict";var r=n("7726"),i=n("69a8"),c=n("2d95"),a=n("5dbc"),o=n("6a99"),s=n("79e5"),u=n("9093").f,l=n("11e9").f,f=n("86cc").f,p=n("aa77").trim,d="Number",h=r[d],v=h,g=h.prototype,b=c(n("2aeb6")(g))==d,m="trim"in String.prototype,x=function(t){var e=o(t,!1);if("string"==typeof e&&e.length>2){e=m?e.trim():p(e,3);var n,r,i,c=e.charCodeAt(0);if(43===c||45===c){if(n=e.charCodeAt(2),88===n||120===n)return NaN}else if(48===c){switch(e.charCodeAt(1)){case 66:case 98:r=2,i=49;break;case 79:case 111:r=8,i=55;break;default:return+e}for(var a,s=e.slice(2),u=0,l=s.length;u<l;u++)if(a=s.charCodeAt(u),a<48||a>i)return NaN;return parseInt(s,r)}}return+e};if(!h(" 0o1")||!h("0b1")||h("+0x1")){h=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof h&&(b?s((function(){g.valueOf.call(n)})):c(n)!=d)?a(new v(x(e)),n,h):x(e)};for(var y,w=n("9e1e")?u(v):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),N=0;w.length>N;N++)i(v,y=w[N])&&!i(h,y)&&f(h,y,l(v,y));h.prototype=g,g.constructor=h,n("2aba")(r,d,h)}},fdef:function(t,e){t.exports="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"}}]);
//# sourceMappingURL=chunk-ce0f5d30.2ac81f6a.js.map