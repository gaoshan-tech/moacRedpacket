{"version":3,"sources":["webpack:///./node_modules/vant/es/dropdown-menu/style/index.js","webpack:///./src/view/get-packet/index.vue?3754","webpack:///src/view/get-packet/index.vue","webpack:///./src/view/get-packet/index.vue?1d16","webpack:///./src/view/get-packet/index.vue","webpack:///./node_modules/vant/es/dropdown-menu/index.js","webpack:///./node_modules/core-js/library/fn/object/define-property.js","webpack:///./node_modules/core-js/library/modules/es6.object.define-property.js","webpack:///./node_modules/vant/es/dropdown-item/style/index.js","webpack:///./node_modules/@babel/runtime-corejs2/core-js/object/define-property.js","webpack:///./node_modules/@babel/runtime-corejs2/helpers/esm/defineProperty.js","webpack:///./src/view/get-packet/index.vue?9c47","webpack:///./node_modules/vant/es/dropdown-item/index.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","packet","status","staticClass","attrs","_v","_s","_f","owner","_e","description","on","receivePacket","staticStyle","getPacketDetails","staticRenderFns","name","components","data","account","$account","addOpt","key","packetAccount","addr","isRandom","remainAmount","remainNumber","startTime","totalAmount","totalNumber","contract","address","$contract_address","instance","created","initInstance","getkey","getWalletAddress","mounted","getPacketInfo","perReceiveRedPacket","watchReceiveEvent","methods","$tp","getWalletList","then","console","log","res","text","optData","index","value","$route","query","$Web3","eth","accounts","privateKeyToAccount","getGasPrice","gasPrice","toString","CreateRedPacketEvent","err","setTimeout","filters","handleStr","str","length","_subStr","component","_createNamespace","createComponent","bem","mixins","event","method","props","zIndex","Number","String","activeColor","overlay","type","Boolean","default","duration","direction","closeOnClickOverlay","offset","computed","scroller","$el","opened","children","some","item","showWrapper","barStyle","updateOffset","$refs","bar","rect","getBoundingClientRect","bottom","window","innerHeight","top","toggleItem","active","forEach","toggle","showPopup","immediate","onClickOutside","_this","h","arguments","Titles","map","disabled","down","titleClass","color","slots","displayTitle","$Object","Object","module","exports","it","desc","defineProperty","$export","S","F","f","_defineProperty","obj","enumerable","configurable","writable","ref","title","options","Array","transition","match","filter","option","watch","val","bindScroll","beforeCreate","_this2","createEmitter","eventName","$emit","onOpen","onClose","onOpened","show","parent","bind","action","onScroll","onClickWrapper","getContainer","stopPropagation","_this3","_this$parent","Options","icon","style","position","callback","$$v"],"mappings":"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","file":"js/chunk-7e382575.5d697891.js","sourcesContent":["import '../../style/base.css';\nimport '../index.css';","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[(_vm.packet.status!='error')?_c('van-row',{staticClass:\"packet-amount-content\",attrs:{\"type\":\"flex\",\"justify\":\"center\"}},[_c('van-col',{staticClass:\"packet-content\"},[_vm._v(_vm._s(_vm._f(\"handleStr\")(this.packet.owner))+\"的红包\")])],1):_vm._e(),_c('van-row',{staticClass:\"mt_20 packet-amount-msg\",attrs:{\"type\":\"flex\",\"justify\":\"center\"}},[_c('van-col',{staticClass:\"packet-amount\"},[_vm._v(_vm._s(this.packet.description))])],1),(_vm.packet.status=='expired')?_c('van-row',{staticClass:\"mt_40 packet-amount-msg\",attrs:{\"type\":\"flex\",\"justify\":\"center\"}},[_c('van-col',{staticClass:\"packet-amount-text\"},[_vm._v(\"红包已过期\")])],1):(_vm.packet.status=='error')?_c('van-row',{staticClass:\"mt_40 packet-amount-msg\",attrs:{\"type\":\"flex\",\"justify\":\"center\"}},[_c('van-col',{staticClass:\"packet-amount-text\"},[_vm._v(\"链上查询中...\")])],1):(_vm.packet.status=='over')?_c('van-row',{staticClass:\"mt_40 packet-amount-msg\",attrs:{\"type\":\"flex\",\"justify\":\"center\"}},[_c('van-col',{staticClass:\"packet-amount-text\"},[_vm._v(\"红包已抢完\")])],1):(_vm.packet.status=='received')?_c('van-row',{staticClass:\"mt_40 packet-amount-msg\",attrs:{\"type\":\"flex\",\"justify\":\"center\"}},[_c('van-col',{staticClass:\"packet-amount-text\"},[_vm._v(\"红包已领取\")])],1):_c('van-row',{staticClass:\"packet-amount-msg\",attrs:{\"type\":\"flex\",\"justify\":\"center\"},on:{\"click\":_vm.receivePacket}},[_c('van-col',{staticClass:\"container packet-image\",attrs:{\"span\":\"22\"}}),_c('van-col',{staticClass:\"packet-get-text\",staticStyle:{\"text-align\":\"center\"},attrs:{\"span\":\"22\"}},[_vm._v(\"\\n      开\\n    \")])],1),(_vm.packet.status!='error')?_c('van-row',{staticClass:\"packet-amount-msg\",attrs:{\"type\":\"flex\",\"justify\":\"center\"},on:{\"click\":_vm.getPacketDetails}},[_c('van-col',{staticClass:\"mt_40 packet-details-text\",staticStyle:{\"text-align\":\"center\"},attrs:{\"span\":24,\"justify\":\"center\"}},[_vm._v(\"查看详情\")])],1):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div>\n    <!-- <van-row type=\"flex\"\n             justify=\"center\"\n             class=\"mt_30\">\n      <van-col span=\"22\">\n        <p class=\"select-title\">请选择墨客钱包</p>\n      </van-col>\n    </van-row>\n\n    <van-row type=\"flex\"\n             justify=\"center\"\n             class=\"mt_10\">\n      <van-col span=\"22\">\n        <van-dropdown-menu class=\"dropdown-wrap\">\n          <van-dropdown-item v-model=\"account\"\n                             :options=\"addOpt\"\n                             @closed=\"perReceiveRedPacket\"\n                             class=\"dropdown-item-wrap\" />\n        </van-dropdown-menu>\n      </van-col>\n    </van-row> -->\n    <van-row v-if=\"packet.status!='error'\"\n             type=\"flex\"\n             justify=\"center\"\n             class=\"packet-amount-content\">\n      <van-col class=\"packet-content\">{{this.packet.owner | handleStr}}的红包</van-col>\n      <!--<van-col class=\"packet-content\">{{msg.amount}}</van-col>-->\n    </van-row>\n\n    <van-row type=\"flex\"\n             justify=\"center\"\n             class=\"mt_20 packet-amount-msg\">\n      <van-col class=\"packet-amount\">{{this.packet.description}}</van-col>\n    </van-row>\n\n    <van-row v-if=\"packet.status=='expired'\"\n             type=\"flex\"\n             justify=\"center\"\n             class=\"mt_40 packet-amount-msg\">\n      <van-col class=\"packet-amount-text\">红包已过期</van-col>\n    </van-row>\n    <van-row v-else-if=\"packet.status=='error'\"\n             type=\"flex\"\n             justify=\"center\"\n             class=\"mt_40 packet-amount-msg\">\n      <van-col class=\"packet-amount-text\">链上查询中...</van-col>\n    </van-row>\n    <van-row v-else-if=\"packet.status=='over'\"\n             type=\"flex\"\n             justify=\"center\"\n             class=\"mt_40 packet-amount-msg\">\n      <van-col class=\"packet-amount-text\">红包已抢完</van-col>\n    </van-row>\n    <van-row v-else-if=\"packet.status=='received'\"\n             type=\"flex\"\n             justify=\"center\"\n             class=\"mt_40 packet-amount-msg\">\n      <van-col class=\"packet-amount-text\">红包已领取</van-col>\n    </van-row>\n    <van-row v-else\n             type=\"flex\"\n             justify=\"center\"\n             class=\"packet-amount-msg\"\n             @click=\"receivePacket\">\n      <van-col span=\"22\"\n               class=\"container packet-image\"></van-col>\n      <van-col span=\"22\"\n               style=\"text-align: center\"\n               class=\"packet-get-text\">\n        开\n      </van-col>\n    </van-row>\n    <van-row v-if=\"packet.status!='error'\"\n             type=\"flex\"\n             justify=\"center\"\n             class=\"packet-amount-msg\"\n             @click=\"getPacketDetails\">\n      <van-col :span=\"24\"\n               class=\"mt_40 packet-details-text\"\n               justify=\"center\"\n               style=\"text-align: center\">查看详情</van-col>\n    </van-row>\n  </div>\n</template>\n\n<script>\nimport { DropdownMenu, DropdownItem, NavBar, Dialog } from 'vant';\nimport Vue from 'vue';\nexport default {\n  name: \"index\",\n  components: {\n    [DropdownMenu.name]: DropdownMenu,\n    [DropdownItem.name]: DropdownItem,\n    [NavBar.name]: NavBar,\n  },\n  data () {\n    return {\n      account: this.$account,\n      addOpt: [\n\n      ],\n      packet: {\n        key: \"0x0\",\n        packetAccount: \"\",\n        addr: \"\",\n        description: \"\",\n        isRandom: null,\n        owner: \"\",\n        remainAmount: 0,\n        remainNumber: 0,\n        startTime: 0,\n        totalAmount: 0,\n        totalNumber: 0,\n        status: 'normal'\n      },\n      contract: {\n        address: this.$contract_address,\n        instance: null\n      }\n    }\n  },\n  created () {\n    this.initInstance();\n    this.getkey();\n    this.getWalletAddress();\n  },\n  mounted () {\n    this.getPacketInfo(this.packet.packetAccount.address);\n    this.perReceiveRedPacket(this);\n    this.watchReceiveEvent();\n    // this.receivePacket();\n    // this.queryOwnedRedPacket();\n  },\n  methods: {\n    // 获取钱包地址\n    getWalletAddress () {\n      this.$tp.getWalletList(3).then(res => {\n        console.log('resdata', res);\n        // localStorage.clear();\n        const optData = res.wallets.moac;\n        // this._blockchain = optData.blockchain;\n        for (let index in optData) {\n          // console.info(\"address\"+optData[index].address);\n          // console.info(optData[index].name);\n          let item = {\n            text: optData[index].name + \":\" + optData[index].address,\n            value: optData[index].address\n          }\n          this.addOpt.push(item);\n          // this.value = this.addOpt[0].value;\n        }\n        // this.handleCreateRedEnvelope();\n      })\n    },\n    async initInstance () {\n      this.contract.instance = this.$chain3.mc.contract(\n        this.$RedPacketArtifact.abi\n      ).at(this.contract.address);\n      window.instance = this.contract.instance\n    },\n    getkey () {\n      this.packet.key = this.$route.query.key;\n      this.packet.packetAccount = this.$Web3.eth.accounts.privateKeyToAccount(this.packet.key)\n    },\n    //预请求抢红包\n    async perReceiveRedPacket (that) {\n      // Vue.prototype.$account = this.account;\n      // while (true) {\n      that.contract.instance.receiveRedPacket.call(that.packet.packetAccount.address, \"0x0\", { from: that.account }, function (err, res) {\n        if (err) {\n          console.log(\"err\")\n          console.log(err)\n        } else {\n          let str = res.toString()\n          console.log(\"str \" + str)\n          let strSlice = \"0x\" + str.slice(10);\n          if (str.indexOf(\"0x08c379a0\") == 0) {\n            let resStr = that.$Web3.eth.abi.decodeParameter(\"string\", strSlice)\n            console.log(resStr)\n            if (\"packetAddr error\" == resStr) {\n              that.packet.status = \"error\"\n              that.getPacketInfo(that.packet.packetAccount.address)\n              // setTimeout(() => {\n              //   that.perReceiveRedPacket(that)\n              // }, 3000)\n              // that.$toast(\"红包不存在或未上链\")\n              // that.$router.push({ path: '/homepage' });\n            } else if (\"packet over\" == resStr) {\n              that.packet.status = \"over\"\n            } else if (\"Red packet expired\" == resStr) {\n              that.packet.status = \"expired\"\n            } else if (\"packet have received\" == resStr) {\n              that.packet.status = \"received\"\n              // that.$toast(\"已领取\")\n              // that.$router.push({ path: '/packet-details' });\n            }\n          }\n        }\n\n      });\n      // if (that.packet.status != \"error\") {\n      //   return\n      // }\n      // let start = (new Date()).getMilliseconds();\n      // while ((new Date()).getMilliseconds() - start < 3000) {\n      //   continue;\n      // }\n      // this.contract.instance.ReceiveRedPacketEvent({ receiveAddr: \"0xd3c4372227b81903993767213e5b386567f67e38\" }, { fromBlock: 6046381, toBlock: \"latest\" }, function (err, res) {\n      // this.contract.instance.CreateRedPacketEvent({ receiveAddr: \"0xd3c4372227b81903993767213e5b386567f67e38\" }, { fromBlock: 6046395, toBlock: 6046395 }, function (err, res) {\n\n      //   // this.contract.instance.CreateRedPacketEvent({ createAddr: \"0xd3c4372227b81903993767213e5b386567f67e38\" }, {fromBlock: 6046381, toBlock: 6046381 }, function (err, res) {\n      //   if (err) {\n      //     // console.log(\"err\")\n      //     // console.log(err)\n      //   } else {\n      //     console.log(res);\n      //   }\n      // })\n    },\n\n    //获取红包基本信息\n    async getPacketInfo (packetAddr) {\n      let that = this;\n      this.contract.instance.queryPacketInfo.call(packetAddr, function (err, res) {\n        if (err) {\n          console.log(\"err\")\n          console.log(err)\n        } else {\n          let str = res.toString()\n          let strSlice = \"0x\" + str.slice(10);\n          if (str.indexOf(\"0x08c379a0\") == 0) {\n            let resStr = that.$Web3.eth.abi.decodeParameter(\"string\", strSlice)\n            console.log(resStr)\n            // that.$toast(\"红包不存在\")\n          } else {\n            // console.log(that.$Web3.eth.abi.decodeParameter(\"string\", str))\n            let packetInfo = that.$Web3.eth.abi.decodeParameters(that.contract.instance.abi[9].outputs, res)\n            // console.log(packetInfo)\n            that.packet.addr = packetInfo.addr;\n            that.packet.description = packetInfo.description;\n            that.packet.isRandom = packetInfo.isRandom;\n            that.packet.owner = packetInfo.owner;\n            that.packet.remainAmount = that.$Web3.utils.fromWei(packetInfo.remainAmount.toString()),\n              that.packet.remainNumber = packetInfo.remainNumber;\n            that.packet.startTime = new Date(packetInfo.startTime * 1000);//startTime.toLocaleDateString()+\" \"+startTime.toTimeString().split(\" \")[0]\n            // (new Date()).getTime() / 1000 - packetInfo.startTime > 24 * 3600;\n            that.packet.totalAmount = that.$Web3.utils.fromWei(packetInfo.totalAmount.toString());\n            that.packet.totalNumber = packetInfo.totalNumber;\n            console.log(that.packet);\n            return\n          }\n          // that.$toast(\"未查询红包信息\")\n        }\n      });\n    },\n    /**\n     * 领取红包\n     * @returns {Promise<void>}\n     */\n    async receivePacket () {\n      if (this.account == \"0x0\" || this.account == undefined) {\n        Dialog.alert({\n          message: '请选择正确的钱包地址',\n        }).then(() => {\n          // on close\n        });\n        //调用聊天\n        // this.$tp.startChat({\n        //   account: '1582661740',\n        //   sessionType: 1,\n        //   blockchain: 'eos'\n        // });\n        //调用保存照片\n        // this.$tp.saveImage({\n        //   url: 'https://dapp.mytokenpocket.vip/tokenpocket_logo.png'\n        // });\n        //全屏\n        // this.$tp.fullScreen({\n        //   fullScreen: 0\n        // })\n        return;\n      }\n      const that = this;\n      const { receiveRedPacket } = this.contract.instance;\n      console.log(this.account)\n      const signStr = this.packet.packetAccount.sign(this.$Web3.utils.sha3(this.account)).signature\n      console.log(signStr);\n      console.log(this.$Web3.utils.hexToBytes(signStr));\n      // console.log(this.$Web3.utils.hexToBytes(signStr.toString().slice(2)));\n      // const inputData = receiveRedPacket.getData(this.packet.packetAccount.address, this.$Web3.utils.hexToBytes(signStr));\n      const inputData = receiveRedPacket.getData(this.packet.packetAccount.address, signStr);\n      console.log(inputData);\n      const gasLimit = this.$chain3.mc.estimateGas({ to: this.contract.address, data: inputData }) + 210000;\n      console.log('gasLimit', gasLimit);\n      const query = {\n        from: this.account,\n        to: this.contract.address,\n        gasPrice: this.$system==\"ios\"?this.getGasPrice():this.$Web3.utils.toHex(this.getGasPrice()),\n        // gasPrice: 1000000000,\n        gasLimit: this.$system==\"ios\"?gasLimit:this.$Web3.utils.toHex(gasLimit),\n        data: inputData,\n        value: \"0x0\",\n        chainId: '0x63',\n        via: '0x',\n        shardingFlag: '0x0',\n      };\n      console.log('query', query);\n      // console.log('sendMoacTransaction--');\n      this.$tp.sendMoacTransaction(query).then(res => {\n        console.log('sendMoacTransaction', res);\n        if (res.result) {\n          console.log('sendMoacTransaction', res);\n          const hash = res.data;\n          let receipt = this.$chain3.mc.getTransactionReceipt(hash);\n          if (receipt) {\n            console.log('receipt:', receipt);\n          }\n          this.$toast('操作成功');\n          this.getPacketDetails();\n        }\n        if (!res.result) {\n          if (\"replacement transaction underpriced\" == res.data) {\n            this.$toast(\"其他交易正在确认中，请稍后！\");\n            return false;\n          }\n          this.$toast(res.data);\n          return false;\n        }\n      }).catch((error) => {\n        console.log(\"error\");\n        console.log(error);\n      });\n\n\n    },\n    getGasPrice () {\n      const gasPrice = this.$chain3.mc.gasPrice;\n      return gasPrice.toString();\n      // console.log(gasPrice.toString()); // \"10000000000000\"\n    },\n    /**\n     * 查看红包领取详情\n     * @returns {Promise<void>}\n     */\n    async getPacketDetails () {\n      this.$router.push({ path: '/packet-details', query: { addr: this.packet.addr, account: this.account } });\n    },\n    //监控链上创建详情\n    watchReceiveEvent () {\n      let that = this;\n      this.contract.instance.CreateRedPacketEvent({ packetAddr: this.packet.addr }, { fromBlock: \"latest\", toBlock: \"latest\" }, function (err, res) {\n        if (err) {\n          //   console.log(\"err\")\n          //   console.log(err)\n        } else {\n          console.log(\"res\");\n          console.log(res);\n          setTimeout(() => { that.getPacketInfo(that.packet.packetAccount.address); that.packet.status = \"normal\"; }, 3000)\n        }\n      })\n    },\n    /**\n     * 收回未领完的过期红包\n     * @returns {Promise<void>}\n     */\n    // async recyclePacket () {\n    //   const { recyclePacket } = this.contract.instance.methods;\n    //   const that = this;\n    //   await recyclePacket(this.qrCode.packetId).send({ from: this.msg.formAddress }).on('receipt', function (receipt) {\n    //     console.log('收回未领完的过期红包', receipt);\n    //   }).on('error', function (error) {\n    //     that.$toast(error.message);\n    //   })\n    // },\n  },\n  filters: {\n    handleStr (str) {\n      if (str.length > 12) {\n        const str1 = str.substring(0, 8);\n        const str2 = str.substr(str.length - 4, 4);\n        const _subStr = str1 + '...' + str2;\n        return _subStr;\n      } else {\n        return str;\n      }\n    }\n  }\n}\n</script>\n\n<style scoped lang=\"less\">\n.select-title {\n  font-size: 14px;\n  text-align: left;\n  /*text-indent: 10px;*/\n}\n.bg-style {\n  background: #efefef;\n}\n.color_fff {\n  background: #fff;\n}\n.mt_40 {\n  margin-top: 40px;\n}\n.mt_30 {\n  margin-top: 30px;\n}\n.mt_20 {\n  margin-top: 20px;\n}\n.mt_10 {\n  margin-top: 10px;\n}\n\n.packet-image {\n  position: relative;\n  top: 50px;\n  background: #fff;\n  z-index: 1;\n  width: 100px;\n  height: 100px;\n  border-radius: 50px 50px 50px 50px;\n  background: #e80b0b;\n}\n.packet-amount-content {\n  margin-top: 100px;\n  flex-wrap: wrap;\n  .packet-content {\n    font-size: 14px;\n  }\n}\n.packet-get-content {\n  margin-top: 180px;\n  flex-wrap: wrap;\n  .packet-content {\n    font-size: 14px;\n  }\n}\n\n.packet-amount-msg {\n  color: #cc8b21;\n  flex-wrap: wrap;\n  .packet-get-text {\n    position: relative;\n    top: -12px;\n    z-index: 2;\n    font-size: 24px;\n    color: #00000041;\n  }\n  .packet-amount {\n    font-size: 20px;\n    font-weight: bold;\n  }\n  .packet-amount-text {\n    font-size: 18px;\n  }\n  .packet-details-text {\n    font-size: 14px;\n    color: #2140cc;\n  }\n  .gap-style {\n    height: 10px;\n    background: #efefef;\n  }\n}\n.count-wrap {\n  font-size: 14px;\n  flex-wrap: wrap;\n  .van-list-container {\n    width: 100%;\n  }\n}\n.content-container {\n  padding: 10px 15px;\n  margin-top: 55px;\n  font-size: 14px;\n}\n.vote-content {\n  font-size: 16px;\n  padding: 10px 0;\n}\n.people-num-wrap {\n  font-size: 12px;\n  line-height: 30px;\n}\n.list-item {\n  margin-top: 10px;\n}\n.fl-wrap {\n  display: flex;\n  align-items: center;\n}\n.fr-wrap {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n}\n.list-item span {\n  margin-right: 10px;\n}\n.vote-img-wrap {\n  width: 40px;\n  height: 40px;\n  display: inline-block;\n  overflow: hidden;\n  border-radius: 50%;\n}\n.vote-img-wrap img {\n  width: 100%;\n  height: 100%;\n  display: block;\n}\n.name-wrap {\n  line-height: 20px;\n  width: 100px;\n  overflow: hidden;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n}\n.vote-time-wrap {\n  display: block;\n}\n</style>","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=4ba2ec84&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=4ba2ec84&scoped=true&lang=less&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4ba2ec84\",\n  null\n  \n)\n\nexport default component.exports","// Utils\nimport { createNamespace, isDef } from '../utils';\nimport { getScroller } from '../utils/dom/scroll'; // Mixins\n\nimport { ParentMixin } from '../mixins/relation';\nimport { ClickOutsideMixin } from '../mixins/click-outside';\n\nvar _createNamespace = createNamespace('dropdown-menu'),\n    createComponent = _createNamespace[0],\n    bem = _createNamespace[1];\n\nexport default createComponent({\n  mixins: [ParentMixin('vanDropdownMenu'), ClickOutsideMixin({\n    event: 'click',\n    method: 'onClickOutside'\n  })],\n  props: {\n    zIndex: [Number, String],\n    activeColor: String,\n    overlay: {\n      type: Boolean,\n      default: true\n    },\n    duration: {\n      type: [Number, String],\n      default: 0.2\n    },\n    direction: {\n      type: String,\n      default: 'down'\n    },\n    closeOnClickOverlay: {\n      type: Boolean,\n      default: true\n    }\n  },\n  data: function data() {\n    return {\n      offset: 0\n    };\n  },\n  computed: {\n    scroller: function scroller() {\n      return getScroller(this.$el);\n    },\n    opened: function opened() {\n      return this.children.some(function (item) {\n        return item.showWrapper;\n      });\n    },\n    barStyle: function barStyle() {\n      if (this.opened && isDef(this.zIndex)) {\n        return {\n          zIndex: 1 + this.zIndex\n        };\n      }\n    }\n  },\n  methods: {\n    updateOffset: function updateOffset() {\n      if (!this.$refs.bar) {\n        return;\n      }\n\n      var rect = this.$refs.bar.getBoundingClientRect();\n\n      if (this.direction === 'down') {\n        this.offset = rect.bottom;\n      } else {\n        this.offset = window.innerHeight - rect.top;\n      }\n    },\n    toggleItem: function toggleItem(active) {\n      this.children.forEach(function (item, index) {\n        if (index === active) {\n          item.toggle();\n        } else if (item.showPopup) {\n          item.toggle(false, {\n            immediate: true\n          });\n        }\n      });\n    },\n    onClickOutside: function onClickOutside() {\n      this.children.forEach(function (item) {\n        item.toggle(false);\n      });\n    }\n  },\n  render: function render() {\n    var _this = this;\n\n    var h = arguments[0];\n    var Titles = this.children.map(function (item, index) {\n      return h(\"div\", {\n        \"attrs\": {\n          \"role\": \"button\",\n          \"tabindex\": item.disabled ? -1 : 0\n        },\n        \"class\": bem('item', {\n          disabled: item.disabled\n        }),\n        \"on\": {\n          \"click\": function click() {\n            if (!item.disabled) {\n              _this.toggleItem(index);\n            }\n          }\n        }\n      }, [h(\"span\", {\n        \"class\": [bem('title', {\n          active: item.showPopup,\n          down: item.showPopup === (_this.direction === 'down')\n        }), item.titleClass],\n        \"style\": {\n          color: item.showPopup ? _this.activeColor : ''\n        }\n      }, [h(\"div\", {\n        \"class\": \"van-ellipsis\"\n      }, [item.slots('title') || item.displayTitle])])]);\n    });\n    return h(\"div\", {\n      \"class\": bem()\n    }, [h(\"div\", {\n      \"ref\": \"bar\",\n      \"style\": this.barStyle,\n      \"class\": bem('bar', {\n        opened: this.opened\n      })\n    }, [Titles]), this.slots('default')]);\n  }\n});","require('../../modules/es6.object.define-property');\nvar $Object = require('../../modules/_core').Object;\nmodule.exports = function defineProperty(it, key, desc) {\n  return $Object.defineProperty(it, key, desc);\n};\n","var $export = require('./_export');\n// 19.1.2.4 / 15.2.3.6 Object.defineProperty(O, P, Attributes)\n$export($export.S + $export.F * !require('./_descriptors'), 'Object', { defineProperty: require('./_object-dp').f });\n","import '../../style/base.css';\nimport '../../overlay/index.css';\nimport '../../info/index.css';\nimport '../../icon/index.css';\nimport '../../cell/index.css';\nimport '../../popup/index.css';\nimport '../index.css';","module.exports = require(\"core-js/library/fn/object/define-property\");","import _Object$defineProperty from \"../../core-js/object/define-property\";\nexport default function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    _Object$defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=4ba2ec84&scoped=true&lang=less&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--10-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--10-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--10-oneOf-1-2!../../../node_modules/less-loader/dist/cjs.js??ref--10-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./index.vue?vue&type=style&index=0&id=4ba2ec84&scoped=true&lang=less&\"","// Utils\nimport { createNamespace } from '../utils';\nimport { on, off } from '../utils/dom/event'; // Mixins\n\nimport { PortalMixin } from '../mixins/portal';\nimport { ChildrenMixin } from '../mixins/relation'; // Components\n\nimport Cell from '../cell';\nimport Icon from '../icon';\nimport Popup from '../popup';\n\nvar _createNamespace = createNamespace('dropdown-item'),\n    createComponent = _createNamespace[0],\n    bem = _createNamespace[1];\n\nexport default createComponent({\n  mixins: [PortalMixin({\n    ref: 'wrapper'\n  }), ChildrenMixin('vanDropdownMenu')],\n  props: {\n    value: null,\n    title: String,\n    disabled: Boolean,\n    titleClass: String,\n    options: {\n      type: Array,\n      default: function _default() {\n        return [];\n      }\n    }\n  },\n  data: function data() {\n    return {\n      transition: true,\n      showPopup: false,\n      showWrapper: false\n    };\n  },\n  computed: {\n    displayTitle: function displayTitle() {\n      var _this = this;\n\n      if (this.title) {\n        return this.title;\n      }\n\n      var match = this.options.filter(function (option) {\n        return option.value === _this.value;\n      });\n      return match.length ? match[0].text : '';\n    }\n  },\n  watch: {\n    showPopup: function showPopup(val) {\n      this.bindScroll(val);\n    }\n  },\n  beforeCreate: function beforeCreate() {\n    var _this2 = this;\n\n    var createEmitter = function createEmitter(eventName) {\n      return function () {\n        return _this2.$emit(eventName);\n      };\n    };\n\n    this.onOpen = createEmitter('open');\n    this.onClose = createEmitter('close');\n    this.onOpened = createEmitter('opened');\n  },\n  methods: {\n    // @exposed-api\n    toggle: function toggle(show, options) {\n      if (show === void 0) {\n        show = !this.showPopup;\n      }\n\n      if (options === void 0) {\n        options = {};\n      }\n\n      if (show === this.showPopup) {\n        return;\n      }\n\n      this.transition = !options.immediate;\n      this.showPopup = show;\n\n      if (show) {\n        this.parent.updateOffset();\n        this.showWrapper = true;\n      }\n    },\n    bindScroll: function bindScroll(bind) {\n      var scroller = this.parent.scroller;\n      var action = bind ? on : off;\n      action(scroller, 'scroll', this.onScroll, true);\n    },\n    onScroll: function onScroll() {\n      this.parent.updateOffset();\n    },\n    onClickWrapper: function onClickWrapper(event) {\n      // prevent being identified as clicking outside and closed when use get-contaienr\n      if (this.getContainer) {\n        event.stopPropagation();\n      }\n    }\n  },\n  render: function render() {\n    var _this3 = this;\n\n    var h = arguments[0];\n    var _this$parent = this.parent,\n        zIndex = _this$parent.zIndex,\n        offset = _this$parent.offset,\n        overlay = _this$parent.overlay,\n        duration = _this$parent.duration,\n        direction = _this$parent.direction,\n        activeColor = _this$parent.activeColor,\n        closeOnClickOverlay = _this$parent.closeOnClickOverlay;\n    var Options = this.options.map(function (option) {\n      var active = option.value === _this3.value;\n      return h(Cell, {\n        \"attrs\": {\n          \"clickable\": true,\n          \"icon\": option.icon,\n          \"title\": option.text\n        },\n        \"key\": option.value,\n        \"class\": bem('option', {\n          active: active\n        }),\n        \"style\": {\n          color: active ? activeColor : ''\n        },\n        \"on\": {\n          \"click\": function click() {\n            _this3.showPopup = false;\n\n            if (option.value !== _this3.value) {\n              _this3.$emit('input', option.value);\n\n              _this3.$emit('change', option.value);\n            }\n          }\n        }\n      }, [active && h(Icon, {\n        \"class\": bem('icon'),\n        \"attrs\": {\n          \"color\": activeColor,\n          \"name\": \"success\"\n        }\n      })]);\n    });\n    var style = {\n      zIndex: zIndex\n    };\n\n    if (direction === 'down') {\n      style.top = offset + \"px\";\n    } else {\n      style.bottom = offset + \"px\";\n    }\n\n    return h(\"div\", [h(\"div\", {\n      \"directives\": [{\n        name: \"show\",\n        value: this.showWrapper\n      }],\n      \"ref\": \"wrapper\",\n      \"style\": style,\n      \"class\": bem([direction]),\n      \"on\": {\n        \"click\": this.onClickWrapper\n      }\n    }, [h(Popup, {\n      \"attrs\": {\n        \"overlay\": overlay,\n        \"position\": direction === 'down' ? 'top' : 'bottom',\n        \"duration\": this.transition ? duration : 0,\n        \"closeOnClickOverlay\": closeOnClickOverlay,\n        \"overlayStyle\": {\n          position: 'absolute'\n        }\n      },\n      \"class\": bem('content'),\n      \"on\": {\n        \"open\": this.onOpen,\n        \"close\": this.onClose,\n        \"opened\": this.onOpened,\n        \"closed\": function closed() {\n          _this3.showWrapper = false;\n\n          _this3.$emit('closed');\n        }\n      },\n      \"model\": {\n        value: _this3.showPopup,\n        callback: function callback($$v) {\n          _this3.showPopup = $$v;\n        }\n      }\n    }, [Options, this.slots('default')])])]);\n  }\n});"],"sourceRoot":""}